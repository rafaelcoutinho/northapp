<ion-view view-title="Ranking">

    <ion-content class="scroll-bg">
        <ion-refresher pulling-text="Puxe para atualizar..." on-refresh="doRefresh(true)">
        </ion-refresher>
        <div class="item" ng-if="results.length==0">
            Aguarde a primeira etapa do ano!
        </div>
        <label class="item item-input item-select " ng-if="results.length>0">
            <div class="input-label ">


                <select class="form-control" ng-change="updatePrefCategoria(filterCat.id_Categoria,null)" ng-model="filterCat.id_Categoria"
                ng-options="cat.id as cat.nome for cat in categorias" ng-init="filterCat = getLastSelectedCat()">


                </select>
            </div>

        </label>


        <div class="list card" ng-if="results.length>0">

            <div class="row titTabela">
                <div class="col col-top col-20 ">#</div>
                <div class="col col-top col-80">Equipe</div>
            </div>
            
            <a class="item " style="padding:2px" ng-repeat="equipe in results|filter:filterCat">
                <div class="row " ng-init="carregaCompetidores(equipe) ">
                    <div class="col col-demo col-20 " style="text-align:center; ">
                        <span class="rankingEquipePosicao">{{$index+1}}ยบ</span>
                    </div>

                    <div class="col col-demo col-80 rankingEquipe">{{equipe.nome}}
                    </div>
                </div>
                <div class="row ">
                    <div class="col col-demo col-20 " style="text-align:center; ">
                        {{equipe.pontos}}pts
                    </div>
                    <div class="col col-demo col-80 ">
                        <img class="avatarImage" ng-repeat="membro in carregaCompetidores(equipe)|limitTo:6|orderBy:['fbId']" style="float:right; "
                            onerror="this.src='img/etapa_futura.png';"  ng-src="http://graph.facebook.com/{{membro.fbId}}/picture?width=128&height=128 "></div>
                </div>

            </a>

        </div>

    </ion-content>
</ion-view>